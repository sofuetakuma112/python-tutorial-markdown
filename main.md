# Python 実習

## はじめに

今回の導入教育では python の基本的な構文や文法について学習する．開発環境は GoogleColaboratory を使用する．GoogleColaboratory の使い方は「 Google colab.pdf 」を参照してください．

## 基礎

### 文字列

Python では, 文章や人名といったの文字からなるデータを, **文字列(string)** という.
文字列をソースコードに書くには`"`(ダブルクォーテーション)または`'`(シングルクォーテーション)で囲んで記述する．また文字列は間に「+」を入力することで結合することができる．次の例では文字列を`print`関数を用いて出力している.

`print`関数は, 引数として指定した値を画面に出力する.

```py
print("python実習")
print('Lorem ipsum dolor sit amet, consectetur adipiscing elit')
print('left' + ' ' + "right")
```

```
python実習
Lorem ipsum dolor sit amet, consectetur adipiscing elit
left right
```

### 数値

数値は Python で四則計算などを行う場合に使用される．数値は文字列のように`"`や`'`で囲む必要はない．また`int`は後述する **データ型** を示している．

```py
print(int(1) + int(3)) # 足し算
print(int(1) - int(3)) # 引き算
print(int(1) * int(3)) # かけ算
print(int(1) / int(3)) # 割り算
print(int(1) % int(3)) # 余り
print(int(2) ** int(3)) # べき乗
```

```
4
-2
3
0.3333333333333333
1
8
```

### 変数

変数とは値を格納する場所であり，数値やデータなどを格納することができる．次の例では変数`x`, `y`にそれぞれ値を代入して`print`関数で出力している

```py
x = 8
y = "python実習"
print(x)
print(y)
```

```
8
python実習
```

### データ型

Python では, これまで紹介してきたような, 整数や実数, 文字列などのデータのことを, **オブジェクト(Object)** という用語で呼ぶ.

オブジェクトには, 整数や実数など, いろいろな種類がある.オブジェクトの種類のことを, **データ型**と呼ぶ.

例えば数字の`2`は, **整数型のオブジェクト**, 文字列の`abc`は, **文字列型のオブジェクト** という呼び方をする.

以下に Python の主なデータ型を示す.

| データ型            | 説明                                                                                                                                                                                          | 記述例                                               |
| ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------- |
| `str`(文字列)       | 文字列                                                                                                                                                                                        | `str = 'abc'`                                        |
| `int`(整数)         | 小数点を含まない数値                                                                                                                                                                          | `num = 6`                                            |
| `float`(浮動小数点) | 小数点を含む数値                                                                                                                                                                              | `num = 3.14`                                         |
| `bool`(ブール)      | 真偽値                                                                                                                                                                                        | `check_flag = True`                                   |
| `datetime`(日付)    | 日付                                                                                                                                                                                          | `date1 = datetime.datetime(2020, 1, 31, 12, 36, 45)` |
| `list`(リスト)      | 複数の要素(文字列, 整数, 論理など)を含むもの. `[]`を使って定義し, 各要素の間は`,`(カンマ)で区切る. 格納した各要素の変更が可能                                                                 | `list = ['abc', 6, True]`                            |
| `tuple`(タプル)     | 複数の要素(文字列, 整数, 論理など)を含むもの. `()` を使って定義し, 各要素の間は`,`(カンマ)で区切る 格納した各要素の変更は不可能                                                               | `tuple = ('abc', 6, True)`                           |
| `str`(文字列)       | 複数の要素（文字列, 整数, 論理など）を含むもの. `{}`を使って定義し, 各要素は, キーと組合せて間に`:`(コロン)を挟み記述する. キー値と合わせて値を設定することにより, キー値を元に値を参照できる | `profile = {'name' : 'sofue', 'age' : 22}`          |

### リスト
これまで, 数値や文字列などの使い方を学んできたが, こういった個別の値一つ一つではなく, 一連の値を並べて, ひとまとめにした情報というのもよく必要になる. 

例えば, 「東海道新幹線の停車駅」という情報は, 「東京,品川,新横浜,小田原,熱海」という, 駅の名前の文字列を, 停車順に並べた情報である. このような, 複数の値を決まった順番に並べ, ひとまとめにした情報は日常生活でもよく見かける.

こういった, 決まった順番に並んだ値で構成される情報は, Pythonでは **リストオブジェクト** で表現する. リストオブジェクトは, 他のオブジェクトを **要素** として登録できるオブジェクトで, 他のプログラミング言語では配列などと呼ばれることもある.

リストオブジェクトは, 次のように角カッコ`[`と`]`で作成する.

```py
[要素1, 要素2, ...]
```

`[`と`]`の間には, リストの要素となるオブジェクトを`,`で区切って指定する.

東海道新幹線の下りの停車駅は, 文字列を格納したリストとして, 次のように書ける.

```py
stations = ["東京", "品川", "新横浜", "小田原", "熱海"]
print(stations)
```

```py
['東京', '品川', '新横浜', '小田原', '熱海']
```

リストオブジェクトに登録した要素は, 次のような式で参照できる.

```py
リストオブジェクト[要素の順番]
```

リストオブジェクトに登録した要素を参照するときは, リストオブジェクトに参照する要素の順番を指定する. 最初の要素を参照するときは`0`, その次は`1`, のように指定する. 前述の新幹線の停車駅では, `0`が`東京`, `1`が`品川`となる.

![リストとインデックス](https://www.python.jp/train/list/station1.png)

次の例では, `stations`リストから停車駅を参照してみる.

```py
print(stations[0])
print(stations[1])
print(stations[0], stations[1], stations[2], stations[3], stations[4])
```

```
東京
品川
東京 品川 新横浜 小田原 熱海
```

ここで指定している要素の順番(`0`~`4`の数字)のことを, **インデックス(添字)** と言う. リストの最後の要素のインデックスは, `リストの要素数 - 1`となる. `stations`リストの場合は要素が5つなので, 最後の要素のインデックスは`4`となる.
### 比較演算子
Python では, 不等号を使って, 2 つの値を比較し, その不等式が正しいかどうかを調べることができる.

例えば, 次の式は, 数値の`100`と`10`を`>`記号で比較して, `100`が`10`よりも大きいかどうか調べる.

```py
print(100 > 10)
```

```
True
```

`>`は, 数値の`100`と`10`を比較する演算子である. 比較の結果, `100`のほうが`10`よりも大きければ, `>`演算子の条件が満たされるので, `True`(真)という値を返す. `True`は **ブール型** の値である.

また次の例では `10`と`100`を比較する. `10`は`100`よりも小さいので, `>`演算子の条件が満たされず, `False`(偽)という値を返す.

```py
print(10 > 100)
```

```
False
```

`False`も, `True`と同様に, **ブール型** という種類の値である. 
このように, 値を比較する演算子を, **比較演算子** という.

比較演算子は, 2つの値を比較し, 条件が成立すれば **ブール型** の`True`(真)を, 成立しなければ **ブール型** の`False`(偽)を返す.

主な比較演算子には, 以下のような種類がある.

| 演算子   | 条件                    |
| -------- | ----------------------- |
| `a < b`  | a は b より小さい       |
| `a <= b` | a は b と等しいか小さい |
| `a > b`  | a は b より大きい       |
| `a >= b` | a は b と等しいか大きい |
| `a == b` | a と b は等しい         |
| `a != b` | a と b は等しくない     |

### if文
条件による処理の分岐は, if文で行う. if文は次のように記述する.

```py
if 条件式:
  処理1
  処理2
  ...
```

このように記述すると, 条件式の結果が`True`になったとき, 処理１, 処理2, ...が実行される. 条件式が`False`の場合は, 処理1, 処理2は実行されない.

if文は, 次のような形式で, 条件が満たされなかったときだけ実行する処理も指定できる.

```py
if 条件式:
  処理1
  処理2
  ...
else:
  処理3
  処理4
  ...
```

条件式 の結果が`True`になるときは, `if:`に続く`処理1, 処理2, ...`が実行され, `False`のときは,  `else:`に続く`処理3, 処理4, ...`が実行される.

`else:`以降の部分を, **else節**と言う.

if文には, if文で指定した条件が満たされなかった時に評価する条件を, 次のように`elif:`で指定できる.

```py
if 条件式1:
  処理1
  ...
elif 条件式2:
  処理2
  ...
elif 条件式3:
  処理3
  ...
else:
  処理4
  ...
```

`elif`で追加された条件の部分を, **elif節**という. 

このプログラムを実行すると, まず`条件式1`を判定し, 条件が満たされなければ最初の`elif`節の`条件式2`を判定する. `条件式2`が満たされていれば, `処理2`を実行し, `条件式2`が満たされなければ, 以降の`elif`節にある`条件式3, 条件式4, ...`を次々に判定する. すべての条件が満たされなければ, `else`節の処理を実行する.

次の例では入力した整数を`3`で割った時の余りを条件分岐を用いて表示している．

```py
print(" 整数を入力してください ")

a = int(input())
b = a % int(3)

if b == 0:
  print("余りは0")
elif b == 1:
  print("余りは1")
else:
  print("余りは2")
```

### while 文
Pythonでは, 反復処理は`while`文で記述する.

```py
while 条件式:
  処理1
  処理2
  ...
```

`while`文は, `条件式`が満たされ, 結果が`True`(真)である間, `処理`を繰り返して実行します.

次の例では, 変数`i`が繰り返しごとに`1`加算され, 条件式`i < 10`が`False`になったタイミングで繰り返し処理から抜ける.

```py
i = 0
while i < 10:
  print(i)
  i = i + 1 # iの数値を1増加
```

```
0
1
2
3
4
5
6
7
8
9
```

`while`文によるループは, 指定した条件式が`False`になると, ループを終了するが, それ以外にも, ループの途中で`break`文を実行すると, ループを抜け出せる.

次の例では`i`が`3`になると`break`文によりループ処理を抜ける．

```py
i = 0
while i < 10:
  if i == 3:
    break
  print(i)
  i = i + 1
```

```
0
1
2
```

`while`文を使ったプログラムは, 書き間違えると永久に繰り返し処理を実行し続ける事になる.

次の例では, 繰り返し処理を終了する条件が成立することがないので, いつまでも終わらない.

```py
i = 0
while True:
  print(i)
  i = i + 1
```

```
0
1
2
3
4
5
...
```

これが有名な **無限ループ** と呼ばれるものである.

Colabでは, 無限ループなどによって終了できなくなってしまったら, 実行中のセルの左側にあるボタンをクリックすると, 中断できる.

![Colabの画面](https://www.python.jp/train/loop/interrupt.png)

ターミナルで実行している場合は, ターミナル上で`Ctrl + C`を入力すると, 実行中のプログラムを停止することができる.
### for文

`for`文は集合要素(リストやタプルなど)を一つずつ取り出して変数に代入し処理を行う．使用例として図 5 と図 6 を示す．図 5 では`lists`内の文字列を順番に表示している．図 6 では range()を使用することで数値の表示を行っている．

```py
lists = ["aaaa", "bbbb", "cccc", "dddd"]
for item in lists:
  print(item)
```

```py
try:
  a = int(input())
  print("入力した整数は" + str(a) + "です")
except:
  print("整数を入力してください")
```

### 関数

Python には, 単純な足し算や引き算以外にも, 便利な機能がたくさん用意されています.そういった便利な機能の多くは, **関数**として利用できるようになっています.

**関数**は, 次の形式で利用します.

```py
関数名(引数1, 引数2, 引数3, ...)
```

関数を実行する時, 必要に応じて **引数(ひきすう)** を指定します.例えば, abs()という名前の関数は, 引数として数値を指定すると, その数値の絶対値が結果となります.次の例では, abs()に引数として数値の-200 を指定しています

```py
abs(-200)
```

```
200
```

`abs(-200)`の結果として, `-200`の絶対値である`200`が出力されています. 
この`200`のように, 関数を呼び出して求めた結果の値のことを, **戻り値** や **返り値** などと呼びます. 
上の例では, 引数として`-200`を指定して関数`abs`を呼び出し, その戻り値として, `200`を得ています.

このような関数は, 用意されたものを使うだけではなく, 自分でも必要な関数を作れるようになっています.

関数を作ることを, プログラミング用語ではよく「関数を定義する」といいます.

関数の定義は, 次の形式で記述します.

```py
def 関数名(引数名1, 引数名2, ...):
  処理1
  処理2
  ...
```

次の例では四則計算を行っている．関数`calculation`の引数として変数`a`と`b`を渡しており，関数`calculation`側では, 関数呼び出し時に引数として渡された値(ここでは`a`, `b`)を変数`x`, `y`に格納して関数内で使用するように記述している．

```py
while True:
  try:
    print("1つ目の整数")
    a = int(input())
    print("2つ目の整数")
    b = int(input())
    break
  except ValueError:
    print("整数を入力してください")

def calculation(x, y):
  total = x + y
  difference = x - y
  product = x * y
  quotient = x / y
  print("和は" + str(total) + "です")
  print("差は" + str(difference) + "です")
  print("積は" + str(product) + "です")
  print("商は" + str(quotient) + "です")

calculation(a, b)
```

### 例外処理

例外処理とは, 本来行いたい処理 A で例外が生じた場合に処理 B を実行する際に使用する．使用例を図??に示す．図??ではエラーが発生した場合「整数を入力してください」と表示するようにしている．ただし図 7 の場合 except 節でエラーの指定を行っておらず全てのエラーが含まれ予想外のエラーも含まれるため，基本的な使用方法は図 8 のようにエラー定義をする．

## 参考文献
> [ゼロからのPython入門講座](https://www.python.jp/train/index.html)

> [図解！Python データ型を徹底解説！(確認・変換・指定方法と種類一覧)](https://ai-inter1.com/python-data_type/)